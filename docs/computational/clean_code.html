<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Setting up and organizing a project" href="../setting_up_project.html" /><link rel="prev" title="Getting started with programming" href="programming_intro.html" />

    <meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>Clean code - SfB knowledge base documentation</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">SfB knowledge base  documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">SfB knowledge base  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption"><span class="caption-text">Getting started:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started_bioinf.html">Getting started in bioinformatics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../biology/genomics_intro.html">Getting started with genomics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../biology/immunology_intro.html">Getting started with immunology and adaptive immune receptors</a></li>
</ul>
<p class="caption"><span class="caption-text">Topics:</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../analysis_design.html">Designing an analysis</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="statistics.html">Statistics: reference</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="ml_and_causality.html">Machine learning and causal inference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="ml_intro/overview.html">Brief overview of machine learning in computational biology</a></li>
<li class="toctree-l3"><a class="reference internal" href="ml_intro/intro_to_ml.html">Introduction to Machine Learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="ml_intro/ml_models.html">Introduction to machine learning models and algorithms</a></li>
<li class="toctree-l3"><a class="reference internal" href="ml_intro/data_representation.html">Data representation in machine learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="ml_intro/ml_model_comparison_and_uncertainty.html">Machine learning model comparison and uncertainty</a></li>
<li class="toctree-l3"><a class="reference internal" href="ml_intro/transparency_and_reproducibility.html">Transparency and reproducibility in machine learning</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="specialized_topics_in_ml_and_stats.html">Specialized topics in machine learning and statistics</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="specialized_ml_topics/DL_book_ch5_1_overview.html">Machine Learning Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="specialized_ml_topics/variational_inference.html">Notes on variational inference</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../biology/genomics.html">Genomics: references</a></li>
<li class="toctree-l2"><a class="reference internal" href="../biology/immunology.html">Immunology: references</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../programming.html">Programming</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="programming_intro.html">Getting started with programming</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Clean code</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../setting_up_project.html">Setting up and organizing a project</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label for="toctree-checkbox-5"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="sharing_tools.html">Services to share developed tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="containers.html">Containers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../running_analysis.html">Running an analysis</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../writing.html">Academic Writing</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label for="toctree-checkbox-6"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../writing/essay_master_students.html">Writing an essay for master students</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="clean-code">
<h1>Clean code<a class="headerlink" href="#clean-code" title="Permalink to this headline">Â¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Aim: The following are notes from the Clean Code book by Robert C. Martin. The aim is to briefly cover some best coding practices on simple
examples.</p>
<p>Level: any ğŸŒ±ğŸŒ¿ğŸŒ³</p>
</div>
<div class="section" id="chapter-1-meaningful-names">
<h2>Chapter 1: Meaningful names<a class="headerlink" href="#chapter-1-meaningful-names" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="use-intention-revealing-names">
<h3>Use intention-revealing names<a class="headerlink" href="#use-intention-revealing-names" title="Permalink to this headline">Â¶</a></h3>
<p>Names should reveal intent.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">d2</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">d2</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span> 

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">sequence_has_subsequence</span><span class="p">(</span><span class="n">sequence</span><span class="p">,</span> <span class="n">subsequence</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">subsequence</span> <span class="ow">in</span> <span class="n">sequence</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">return</span> <span class="bp">False</span>


<span class="k">if</span> <span class="n">sequence_has_subsequence</span><span class="p">(</span><span class="s2">"ACTGACTG"</span><span class="p">,</span> <span class="s2">"ACT"</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"We have a match"</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="avoid-disinformation">
<h3>Avoid disinformation<a class="headerlink" href="#avoid-disinformation" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>Donâ€™t call something a list unless itâ€™s actually a list</p></li>
<li><p>Avoid long variable names that are similar</p></li>
</ul>
</div>
<div class="section" id="make-meaningful-distinctions">
<h3>Make meaningful distinctions<a class="headerlink" href="#make-meaningful-distinctions" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">align_sequence_to_reference</span><span class="p">(</span><span class="n">dna1</span><span class="p">,</span> <span class="n">dna2</span><span class="p">):</span>
    <span class="c1"># ..</span>

<span class="c1"># Good</span>
<span class="k">def</span> <span class="nf">align_sequence_to_reference</span><span class="p">(</span><span class="n">reference_dna</span><span class="p">,</span> <span class="n">query_dna</span><span class="p">):</span>
    <span class="c1"># ..</span>
</pre></div>
</div>
<p>Avoid noise words:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dna_string</span> <span class="o">=</span> <span class="s2">"ACTG"</span>
<span class="c1"># instead:</span>
<span class="n">dna</span> <span class="o">=</span> <span class="s2">"ACTG"</span>
</pre></div>
</div>
</div>
<div class="section" id="use-pronounceable-names">
<h3>Use pronounceable names<a class="headerlink" href="#use-pronounceable-names" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="n">mcfdrsmplrate</span> <span class="o">=</span> <span class="mf">3.0</span>

<span class="c1"># good</span>
<span class="n">monte_carlo_false_discovery_sample_rate</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="c1"># or maybe</span>
<span class="n">mc_false_discovery_sample_rate</span> <span class="o">=</span> <span class="mf">3.0</span>
</pre></div>
</div>
</div>
<div class="section" id="use-searchable-names">
<h3>Use searchable names<a class="headerlink" href="#use-searchable-names" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>Only use single-letter names as local variables inside short methods</p></li>
<li><p>Variables used multiple places should have a search-friendly name</p></li>
</ul>
</div>
<div class="section" id="avoid-mental-mapping">
<h3>Avoid mental mapping<a class="headerlink" href="#avoid-mental-mapping" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>

<span class="n">j</span> <span class="o">=</span> <span class="mf">4.0</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="n">analyse_sample</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span>

<span class="c1"># better</span>
<span class="n">analysis_parameter</span> <span class="o">=</span> <span class="mf">4.0</span>
<span class="k">for</span> <span class="n">sample_id</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_samples</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">analysis_iteration</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="n">analyse_sample</span><span class="p">(</span><span class="n">sample_id</span><span class="p">,</span> <span class="n">analysis_iteration</span><span class="p">,</span> <span class="n">analysis_parameter</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="classes-and-objects-should-have-noun-names">
<h3>Classes and objects should have noun names<a class="headerlink" href="#classes-and-objects-should-have-noun-names" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad (avoid verbs)</span>
<span class="k">class</span> <span class="nc">Analyse</span><span class="p">:</span>

<span class="c1"># good</span>
<span class="k">class</span> <span class="nc">ImmuneAnalysisRunner</span><span class="p">:</span>
</pre></div>
</div>
</div>
<div class="section" id="methods-should-have-verb-or-verb-phrases-as-names">
<h3>Methods should have verb or verb phrases as names<a class="headerlink" href="#methods-should-have-verb-or-verb-phrases-as-names" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad </span>
<span class="k">def</span> <span class="nf">figure</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">make_figure</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>

<span class="c1"># .. or e.g.:</span>
<span class="k">def</span> <span class="nf">get_figure</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="section" id="don-t-be-cute">
<h3>Donâ€™t be cute<a class="headerlink" href="#don-t-be-cute" title="Permalink to this headline">Â¶</a></h3>
<p>This example is taken from Telia code base for sending an invoice:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad </span>
<span class="k">class</span> <span class="nc">QuantumOfSolace</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">send_to_customer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    
<span class="c1"># good</span>
<span class="k">class</span> <span class="nc">Invoice</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">send_to_customer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="section" id="pick-one-word-per-concept">
<h3>Pick one word per concept<a class="headerlink" href="#pick-one-word-per-concept" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="k">class</span> <span class="nc">Sample</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">get_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="k">class</span> <span class="nc">Analysis</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">fetch_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="section" id="other-rules">
<h3>Other rules:<a class="headerlink" href="#other-rules" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>Avoid using the same word for two purposes</p></li>
<li><p>Use solution domain names (okay to use computer science terminology)</p></li>
<li><p>Add meaningful contect (example: a class can give context to a method)</p></li>
</ul>
</div>
</div>
<div class="section" id="chapter-3-functions">
<h2>Chapter 3: Functions<a class="headerlink" href="#chapter-3-functions" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="make-functions-small">
<h3>Make functions small<a class="headerlink" href="#make-functions-small" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="keep-indentation-level-at-maximum-1-or-2">
<h3>Keep indentation level at maximum 1 or 2<a class="headerlink" href="#keep-indentation-level-at-maximum-1-or-2" title="Permalink to this headline">Â¶</a></h3>
<p>Everything further intendented can usually be a new function</p>
</div>
<div class="section" id="functions-should-do-one-thing">
<h3>Functions should do one thing<a class="headerlink" href="#functions-should-do-one-thing" title="Permalink to this headline">Â¶</a></h3>
<p>Functions should do one thing. They should do it well. They should do it only.
A function can do multiple things if they are at the same level of abstraction.</p>
<ul class="simple">
<li><p>â€œOnly one level of abstraction per functionâ€</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="k">class</span> <span class="nc">Samples</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">add_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample</span><span class="p">):</span>
        <span class="c1"># add</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

        <span class="c1"># run analysis on this sample</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_samples</span><span class="p">:</span>
            <span class="n">simulated_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_simulated_data</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyse_two_samples</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">result</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">best_result</span><span class="p">:</span>
                    <span class="n">best_result</span> <span class="o">=</span> <span class="n">result</span>
            
        <span class="c1"># print report</span>
        <span class="o">....</span> 

<span class="c1"># better (but not good)</span>
<span class="k">class</span> <span class="nc">Samples</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">add_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
        <span class="n">analysis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyse</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_report</span><span class="p">(</span><span class="n">analysis</span><span class="p">)</span>

<span class="c1"># good: Do not analyse anything in the add method</span>
</pre></div>
</div>
</div>
<div class="section" id="the-stepdown-rule">
<h3>The stepdown-rule<a class="headerlink" href="#the-stepdown-rule" title="Permalink to this headline">Â¶</a></h3>
<p>Every function should be followed by a next one so that we can read and understand the code from top to bottom.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SampleAnalyser</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">add_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">filter_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">analyse_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">print_analysis_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</pre></div>
</div>
</div>
<div class="section" id="give-your-functions-few-arguments">
<h3>Give your functions few arguments<a class="headerlink" href="#give-your-functions-few-arguments" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>Zero arguments is optimal</p></li>
<li><p>No more than 3 arguments</p>
<ul>
<li><p>When more than 3: Wrap arguments in a class of their own</p></li>
</ul>
</li>
</ul>
<p>(This rule might be up for discussion, since IDEâ€™s and optional arguments in Python makes many arguments less of a problem)</p>
</div>
<div class="section" id="flag-arguments-are-ugly">
<h3>Flag arguments are ugly<a class="headerlink" href="#flag-arguments-are-ugly" title="Permalink to this headline">Â¶</a></h3>
<p>â€œPassing a boolean into a function is a truly terrible practiceâ€</p>
<ul class="simple">
<li><p>Instead: Make multiple functions</p></li>
</ul>
</div>
<div class="section" id="functions-should-not-have-side-effects">
<h3>Functions should not have side effects<a class="headerlink" href="#functions-should-not-have-side-effects" title="Permalink to this headline">Â¶</a></h3>
<p>Example: See the previous <code class="docutils literal notranslate"><span class="pre">add_sample</span></code> method</p>
</div>
<div class="section" id="functions-should-either-do-something-or-answer-something-not-both">
<h3>Functions should either do something or answer something (not both)<a class="headerlink" href="#functions-should-either-do-something-or-answer-something-not-both" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="prefer-exceptions-to-returning-error-codes">
<h3>Prefer exceptions to returning error codes<a class="headerlink" href="#prefer-exceptions-to-returning-error-codes" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="k">def</span> <span class="nf">add_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">503</span>
    
    <span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="c1"># good</span>
<span class="k">def</span> <span class="nf">add_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_sample</span><span class="p">(</span><span class="n">sample</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">DuplicateSampleException</span><span class="p">(</span><span class="s2">"Sample </span><span class="si">%s</span><span class="s2"> already exists and cannot be added"</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
    
    <span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="extract-try-catch-blocks">
<h3>Extract try/catch blocks<a class="headerlink" href="#extract-try-catch-blocks" title="Permalink to this headline">Â¶</a></h3>
<p>Donâ€™t do error handling inside function that do a specific task (have try/catch on the outside)</p>
</div>
<div class="section" id="don-t-repeat-yourself">
<h3>Donâ€™t repeat yourself<a class="headerlink" href="#don-t-repeat-yourself" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="optional-all-functions-should-have-one-entry-and-one-exit">
<h3>(Optional) All functions should have one entry and one exit<a class="headerlink" href="#optional-all-functions-should-have-one-entry-and-one-exit" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>No continue, break or early returns</p></li>
<li><p>Only one return</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># instead of this</span>
<span class="k">def</span> <span class="nf">has_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">other_sample</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sample</span>  <span class="o">==</span> <span class="n">other_sample</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        
    <span class="k">return</span> <span class="bp">False</span>

<span class="c1"># .. do this:</span>
<span class="k">def</span> <span class="nf">has_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sample</span><span class="p">):</span>
    <span class="n">has_sample</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">other_sample</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">samples</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">sample</span> <span class="o">==</span> <span class="n">other_sample</span><span class="p">:</span>
            <span class="n">has_sample</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="c1"># break would be discouraged here ?</span>
            
    <span class="k">return</span> <span class="n">has_sample</span>
</pre></div>
</div>
</div>
<div class="section" id="refine-long-functions-into-multiple-shorter">
<h3>Refine long functions into multiple shorter<a class="headerlink" href="#refine-long-functions-into-multiple-shorter" title="Permalink to this headline">Â¶</a></h3>
<p>It is okay and common to start out writing long functions, and then refactor them.</p>
</div>
</div>
<div class="section" id="chapter-4-comments">
<h2>Chapter 4: Comments<a class="headerlink" href="#chapter-4-comments" title="Permalink to this headline">Â¶</a></h2>
<p>â€œDonâ€™t comment bad code â€“ rewrite it.â€</p>
<ul class="simple">
<li><p>Comments â€œcompensateâ€ for failure to express ourself in code</p></li>
<li><p>â€œComments lieâ€</p></li>
<li><p>Code changes and evolve, comments stay behind</p></li>
<li><p>Inaccurate comments are far worse than no comments at all</p></li>
</ul>
<div class="section" id="comments-do-not-make-up-for-bade-code">
<h3>Comments do not make up for bade code<a class="headerlink" href="#comments-do-not-make-up-for-bade-code" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>Clean up your bad code instead of commenting it</p>
<ul>
<li><p><em>How do we relate this with â€œquick and dirty programming?â€</em></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="explain-your-self-in-code">
<h3>Explain your self in code<a class="headerlink" href="#explain-your-self-in-code" title="Permalink to this headline">Â¶</a></h3>
</div>
<div class="section" id="don-t-use-comments-when-you-can-use-a-function-or-variable">
<h3>Donâ€™t use comments when you can use a function or variable<a class="headerlink" href="#don-t-use-comments-when-you-can-use-a-function-or-variable" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="c1"># get the sample</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_some_format</span><span class="p">(</span><span class="s2">"data.txt"</span><span class="p">,</span> <span class="n">skip_header</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">","</span><span class="p">)</span>
<span class="c1"># analyse sample</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="c1"># ... </span>
    <span class="c1">#.. </span>

<span class="c1"># good</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">get_sample</span><span class="p">()</span>
<span class="n">analyse</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="avoid-noise">
<h3>Avoid noise<a class="headerlink" href="#avoid-noise" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># sample</span>
<span class="n">sample</span> <span class="o">=</span> <span class="n">get_sample</span><span class="p">()</span>
<span class="c1"># analyse</span>
<span class="n">analyse</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="avoid-todo-comments">
<h3>Avoid todo comments<a class="headerlink" href="#avoid-todo-comments" title="Permalink to this headline">Â¶</a></h3>
<p>Use external systems instead.</p>
</div>
<div class="section" id="informative-comments">
<h3>Informative comments<a class="headerlink" href="#informative-comments" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>Can be useful for cryptic code that cannot be written clearly.</p></li>
<li><p>Can be useful to comment use of library functions/classes</p></li>
<li><p>Amplify something thatâ€™s important (â€œtrimming sequence is important to avoid bug â€¦â€)</p></li>
</ul>
</div>
<div class="section" id="don-t-comment-out-code">
<h3>Donâ€™t comment out code<a class="headerlink" href="#don-t-comment-out-code" title="Permalink to this headline">Â¶</a></h3>
<p>Remove it and use version control instead.</p>
</div>
</div>
<div class="section" id="chapter-5-formatting">
<h2>Chapter 5: Formatting<a class="headerlink" href="#chapter-5-formatting" title="Permalink to this headline">Â¶</a></h2>
<p>The purpose of good formating is give a good impression about the neatness and consistency of the code.</p>
<div class="section" id="vertical-formatting">
<h3>Vertical formatting<a class="headerlink" href="#vertical-formatting" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>No hard and fast rule</p></li>
<li><p>Small files are usually easier to understand ~200 lines.</p></li>
</ul>
<div class="section" id="the-newspaper-metaphor-structure">
<h4>The Newspaper Metaphor (structure)<a class="headerlink" href="#the-newspaper-metaphor-structure" title="Permalink to this headline">Â¶</a></h4>
<ul class="simple">
<li><p>Headline: what the story is about</p></li>
<li><p>First paragraph: synopsis/birdâ€™s-eye view of the story</p></li>
<li><p>The rest: all the details</p></li>
</ul>
<p>Similarly, in a source file:</p>
<ul class="simple">
<li><p>Name should be simple and tell us whether we are in the
right module or not.</p></li>
<li><p>The topmost parts of the source file should provide the high-level
concepts.</p></li>
<li><p>Detail should increase as we move downward.</p></li>
</ul>
</div>
<div class="section" id="the-newspaper-metaphor-length-of-files">
<h4>The Newspaper Metaphor (length of files)<a class="headerlink" href="#the-newspaper-metaphor-length-of-files" title="Permalink to this headline">Â¶</a></h4>
<ul class="simple">
<li><p>Most articles are very small.</p></li>
<li><p>Some are a bit larger.</p></li>
<li><p>Very few contain as much text as a page can hold.</p></li>
</ul>
</div>
<div class="section" id="vertical-openness-between-concepts">
<h4>Vertical Openness Between Concepts<a class="headerlink" href="#vertical-openness-between-concepts" title="Permalink to this headline">Â¶</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad</span>
<span class="kn">import</span> <span class="nn">numpy.random</span> <span class="kn">as</span> <span class="nn">rn</span>
<span class="k">def</span> <span class="nf">get_rand_int</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">rn</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">get_normal</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">rn</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># good</span>
<span class="kn">import</span> <span class="nn">numpy.random</span> <span class="kn">as</span> <span class="nn">rn</span>

<span class="k">def</span> <span class="nf">get_rand_int</span><span class="p">(</span><span class="n">h</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">rn</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_normal</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">rn</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="vertical-density">
<h4>Vertical Density<a class="headerlink" href="#vertical-density" title="Permalink to this headline">Â¶</a></h4>
<p>If openness separates concepts, then vertical density implies close association.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// bad</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReporterConfig</span> <span class="o">{</span>
 <span class="cm">/**</span>
<span class="cm"> * The class name of the reporter listener</span>
<span class="cm"> */</span>
 <span class="kd">private</span> <span class="n">String</span> <span class="n">m_className</span><span class="o">;</span>
 <span class="cm">/**</span>
<span class="cm"> * The properties of the reporter listener</span>
<span class="cm"> */</span>
 <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Property</span><span class="o">&gt;</span> <span class="n">m_properties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Property</span><span class="o">&gt;();</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addProperty</span><span class="o">(</span><span class="n">Property</span> <span class="n">property</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">m_properties</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">property</span><span class="o">);</span>
 <span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// good</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ReporterConfig</span> <span class="o">{</span>
 <span class="kd">private</span> <span class="n">String</span> <span class="n">m_className</span><span class="o">;</span>
 <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Property</span><span class="o">&gt;</span> <span class="n">m_properties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Property</span><span class="o">&gt;();</span>
 
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addProperty</span><span class="o">(</span><span class="n">Property</span> <span class="n">property</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">m_properties</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">property</span><span class="o">);</span>
 <span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="vertical-distance">
<h4>Vertical Distance<a class="headerlink" href="#vertical-distance" title="Permalink to this headline">Â¶</a></h4>
<p>Concepts that are closely related should be kept vertically close to each other.</p>
<div class="section" id="variable-declarations">
<h5>Variable Declarations<a class="headerlink" href="#variable-declarations" title="Permalink to this headline">Â¶</a></h5>
<p>Variables should be declared as close to their usage as possible.</p>
</div>
</div>
<div class="section" id="vertical-ordering-language-dependent">
<h4>Vertical ordering (language dependent)<a class="headerlink" href="#vertical-ordering-language-dependent" title="Permalink to this headline">Â¶</a></h4>
<ul class="simple">
<li><p>Functions should be defined below the functions that call it</p></li>
<li><p>This is the exact opposite of languages like C and C++ that enforce functions to be defined, or at least declared,
before they are used.</p></li>
</ul>
</div>
</div>
<div class="section" id="horizontal-formatting">
<h3>Horizontal Formatting<a class="headerlink" href="#horizontal-formatting" title="Permalink to this headline">Â¶</a></h3>
<p>No hard rules, especially as monitors can be too wide, and the font size is adjustable.</p>
<p>Rule of thumb: 120 characters</p>
<div class="section" id="horizontal-openness-and-density">
<h4>Horizontal Openness and Density<a class="headerlink" href="#horizontal-openness-and-density" title="Permalink to this headline">Â¶</a></h4>
<p>Horizontal white space to associate things that are strongly related and disassociate
things that are more weakly related.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># bad
class Quadratic():
 def __init__ (self,...):
     â‹®
 def root1 (self, a, b, c):
  determinant=self.determinant(a, b, c)
  return (-b+math.sqrt(determinant))/(2 * a)

 def determinant (self, a, b, c):
  return b*b-4*a*c
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span># good
class Quadratic():
 def __init__(self,...):
     â‹®
 def root1(self, a, b, c): # no separation between function name and parentheses
  determinant = self.determinant(a, b, c) # spaces before and after assignment operators
  return (-b - math.sqrt(determinant)) / (2*a) # spaces to accentuate the precedence of operators, and clarify the operations

 def determinant(self, a, b, c):
  return b*b - 4*a*c
</pre></div>
</div>
<p>Unfortunately, most tools for reformatting code are blind to the precedence of
operators and impose the same spacing throughout. So subtle spacings like those
shown above tend to get lost after you reformat the code.</p>
</div>
<div class="section" id="horizontal-alignment">
<h4>Horizontal Alignment<a class="headerlink" href="#horizontal-alignment" title="Permalink to this headline">Â¶</a></h4>
<p>Assembly language-inspired alignment</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// bad</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FitNesseExpediter</span> <span class="kd">implements</span> <span class="n">ResponseSender</span>
<span class="o">{</span>
    <span class="kd">private</span>     <span class="n">Socket</span>          <span class="n">socket</span><span class="o">;</span>
    <span class="kd">private</span>     <span class="n">InputStream</span>     <span class="n">input</span><span class="o">;</span>
    <span class="kd">private</span>     <span class="n">OutputStream</span>    <span class="n">output</span><span class="o">;</span>
    <span class="kd">private</span>     <span class="n">Request</span>         <span class="n">request</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nf">FitNesseExpediter</span><span class="o">(</span><span class="n">Socket</span> <span class="n">s</span><span class="o">,</span>
                             <span class="n">FitNesseContext</span> <span class="n">context</span><span class="o">)</span> <span class="c1">// throws Exception</span>
    <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span>              <span class="n">context</span><span class="o">;</span>
    <span class="n">socket</span> <span class="o">=</span>                    <span class="n">s</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// good</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FitNesseExpediter</span> <span class="kd">implements</span> <span class="n">ResponseSender</span>
<span class="o">{</span>
    <span class="kd">private</span> <span class="n">Socket</span> <span class="n">socket</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">InputStream</span> <span class="n">input</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">OutputStream</span> <span class="n">output</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">Request</span> <span class="n">request</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nf">FitNesseExpediter</span><span class="o">(</span><span class="n">Socket</span> <span class="n">s</span><span class="o">,</span> <span class="n">FitNesseContext</span> <span class="n">context</span><span class="o">)</span>
    <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
    <span class="n">socket</span> <span class="o">=</span> <span class="n">s</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="indentation">
<h4>Indentation<a class="headerlink" href="#indentation" title="Permalink to this headline">Â¶</a></h4>
<p>A source file is a hierarchy rather like an outline.</p>
<p>Each level of this hierarchy is a scope into which:</p>
<ul class="simple">
<li><p>names can be declared</p></li>
<li><p>declarations and executable statements are interpreted.</p></li>
</ul>
<p>Therefore, we indent the lines in proportion to their position in the hiearchy:</p>
<ul class="simple">
<li><p>Statements at the level of the file, e.g. class declarations, are not indented at all.</p></li>
<li><p>Methods within a class are indented one level to the right of the class.</p></li>
<li><p>Implementations of those methods are implemented one level to the right of the method declaration.</p></li>
</ul>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FitNesseServer</span> <span class="kd">implements</span> <span class="n">SocketServer</span> <span class="o">{</span> <span class="kd">private</span> <span class="n">FitNesseContext</span>
<span class="n">context</span><span class="o">;</span> <span class="kd">public</span> <span class="nf">FitNesseServer</span><span class="o">(</span><span class="n">FitNesseContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span>
<span class="n">context</span><span class="o">;</span> <span class="o">}</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">serve</span><span class="o">(</span><span class="n">Socket</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span> <span class="n">serve</span><span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span> <span class="o">}</span> <span class="kd">public</span> <span class="kt">void</span>
<span class="nf">serve</span><span class="o">(</span><span class="n">Socket</span> <span class="n">s</span><span class="o">,</span> <span class="kt">long</span> <span class="n">requestTimeout</span><span class="o">)</span> <span class="o">{</span> <span class="k">try</span> <span class="o">{</span> <span class="n">FitNesseExpediter</span> <span class="n">sender</span> <span class="o">=</span> <span class="k">new</span>
<span class="n">FitNesseExpediter</span><span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="n">context</span><span class="o">);</span>
<span class="n">sender</span><span class="o">.</span><span class="na">setRequestParsingTimeLimit</span><span class="o">(</span><span class="n">requestTimeout</span><span class="o">);</span> <span class="n">sender</span><span class="o">.</span><span class="na">start</span><span class="o">();</span> <span class="o">}</span>
<span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span> <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span> <span class="o">}</span> <span class="o">}</span> <span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FitNesseServer</span> <span class="kd">implements</span> <span class="n">SocketServer</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">FitNesseContext</span> <span class="n">context</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">FitNesseServer</span><span class="o">(</span><span class="n">FitNesseContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">context</span> <span class="o">=</span> <span class="n">context</span><span class="o">;</span>
  <span class="o">}</span>
 
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">serve</span><span class="o">(</span><span class="n">Socket</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">serve</span><span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="mi">10000</span><span class="o">);</span>
  <span class="o">}</span>
 
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">serve</span><span class="o">(</span><span class="n">Socket</span> <span class="n">s</span><span class="o">,</span> <span class="kt">long</span> <span class="n">requestTimeout</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">FitNesseExpediter</span> <span class="n">sender</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FitNesseExpediter</span><span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="n">context</span><span class="o">);</span>
      <span class="n">sender</span><span class="o">.</span><span class="na">setRequestParsingTimeLimit</span><span class="o">(</span><span class="n">requestTimeout</span><span class="o">);</span>
      <span class="n">sender</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="breaking-indentation">
<h5>Breaking Indentation<a class="headerlink" href="#breaking-indentation" title="Permalink to this headline">Â¶</a></h5>
<p>It is sometimes tempting to break the indentation rule for short
if statements, short while loops, or short functions.</p>
<p>Recommendation: Avoid collapsing scopes down to one line, and expand and indent the scopes instead, as described earlier.</p>
</div>
</div>
</div>
</div>
<div class="section" id="chapter-9-unit-tests">
<h2>Chapter 9: Unit Tests<a class="headerlink" href="#chapter-9-unit-tests" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="the-three-laws-of-tdd-test-driven-development">
<h3>The Three Laws of TDD (Test Driven Development)<a class="headerlink" href="#the-three-laws-of-tdd-test-driven-development" title="Permalink to this headline">Â¶</a></h3>
<ul class="simple">
<li><p>First Law: You may not write production code until you have written a failing unit test.</p></li>
<li><p>Second Law: You may not write more of a unit test than is sufficient to fail, and not compiling is failing.</p></li>
<li><p>Third Law: You may not write more production code than is sufficient to pass the currently failing test.</p></li>
</ul>
</div>
<div class="section" id="keeping-tests-clean-no-quick-and-dirty-tests">
<h3>Keeping Tests Clean: No quick and dirty tests<a class="headerlink" href="#keeping-tests-clean-no-quick-and-dirty-tests" title="Permalink to this headline">Â¶</a></h3>
<p>Quick and dirty tests: variables are not well named, test functions are not short and descriptive.</p>
<p><strong>Issues</strong>:</p>
<ul class="simple">
<li><p>Having dirty tests is equivalent to, if not worse than, having no tests.</p></li>
<li><p>Tests must change as the production code evolves. The dirtier the tests, the harder they are to change.</p></li>
<li><p>As you modify the production code, old tests start to fail, and the mess in the test code makes it hard to get those tests to pass again.</p></li>
</ul>
<p>Verdict: test code is just as important as production code, and it is not a second-class citizen.</p>
</div>
<div class="section" id="clean-tests">
<h3>Clean Tests<a class="headerlink" href="#clean-tests" title="Permalink to this headline">Â¶</a></h3>
<p>What makes a clean test? Three things. Readability, readability, and readability.</p>
<p>Donâ€™t write a test where the reader is inundated with details that must be understood before the tests make any sense.
(<strong>show java files</strong>)</p>
<div class="section" id="build-operate-check-pattern">
<h4>BUILD-OPERATE-CHECK pattern<a class="headerlink" href="#build-operate-check-pattern" title="Permalink to this headline">Â¶</a></h4>
<p>The first part builds up the test data:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetPageHieratchyAsXml</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
 <span class="n">makePages</span><span class="o">(</span><span class="s">"PageOne"</span><span class="o">,</span> <span class="s">"PageOne.ChildOne"</span><span class="o">,</span> <span class="s">"PageTwo"</span><span class="o">);</span>
</pre></div>
</div>
<p>The second part operates on that test data:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span> <span class="n">submitRequest</span><span class="o">(</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"type:pages"</span><span class="o">);</span>
</pre></div>
</div>
<p>The third part checks that the operation yielded the expected results:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span> <span class="n">assertResponseIsXML</span><span class="o">();</span>
 <span class="n">assertResponseContains</span><span class="o">(</span>
 <span class="s">"&lt;name&gt;PageOne&lt;/name&gt;"</span><span class="o">,</span> <span class="s">"&lt;name&gt;PageTwo&lt;/name&gt;"</span><span class="o">,</span> <span class="s">"&lt;name&gt;ChildOne&lt;/name&gt;"</span>
</pre></div>
</div>
</div>
<div class="section" id="a-dual-standard">
<h4>A Dual Standard<a class="headerlink" href="#a-dual-standard" title="Permalink to this headline">Â¶</a></h4>
<p>Test code must still be simple, succinct, and expressive, but it need not be as efficient as
production code.</p>
<p>There are things that you might never do in a
production environment that are perfectly fine in a test environment.</p>
<div class="section" id="readability">
<h5>Readability<a class="headerlink" href="#readability" title="Permalink to this headline">Â¶</a></h5>
<p>Before:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Test</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">turnOnLoTempAlarmAtThreashold</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
 <span class="n">hw</span><span class="o">.</span><span class="na">setTemp</span><span class="o">(</span><span class="n">WAY_TOO_COLD</span><span class="o">);</span>
 <span class="n">controller</span><span class="o">.</span><span class="na">tic</span><span class="o">();</span>
 
 <span class="n">assertTrue</span><span class="o">(</span><span class="n">hw</span><span class="o">.</span><span class="na">heaterState</span><span class="o">());</span>
 <span class="n">assertTrue</span><span class="o">(</span><span class="n">hw</span><span class="o">.</span><span class="na">blowerState</span><span class="o">());</span>
 <span class="n">assertFalse</span><span class="o">(</span><span class="n">hw</span><span class="o">.</span><span class="na">coolerState</span><span class="o">());</span>
 <span class="n">assertFalse</span><span class="o">(</span><span class="n">hw</span><span class="o">.</span><span class="na">hiTempAlarm</span><span class="o">());</span>
 <span class="n">assertTrue</span><span class="o">(</span><span class="n">hw</span><span class="o">.</span><span class="na">loTempAlarm</span><span class="o">());</span>
 <span class="o">}</span>
</pre></div>
</div>
<p>After:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Test</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">turnOnLoTempAlarmAtThreshold</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
 <span class="n">wayTooCold</span><span class="o">();</span>
 <span class="n">assertEquals</span><span class="o">(</span><span class="s">"HBchL"</span><span class="o">,</span> <span class="n">hw</span><span class="o">.</span><span class="na">getState</span><span class="o">());</span>
 <span class="o">}</span>
</pre></div>
</div>
<p>Another example:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="nd">@Test</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">turnOnHeaterAndBlowerIfTooCold</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
 <span class="n">tooCold</span><span class="o">();</span>
 <span class="n">assertEquals</span><span class="o">(</span><span class="s">"HBchl"</span><span class="o">,</span> <span class="n">hw</span><span class="o">.</span><span class="na">getState</span><span class="o">());</span>
 <span class="o">}</span>
</pre></div>
</div>
<p>Even though this is close to a violation of the rule about mental mapping, it seems
appropriate in this case. Notice, once you know the meaning, your eyes glide across
that string and you can quickly interpret the results.</p>
</div>
<div class="section" id="efficiency">
<h5>Efficiency<a class="headerlink" href="#efficiency" title="Permalink to this headline">Â¶</a></h5>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="n">String</span> <span class="nf">getState</span><span class="o">()</span> <span class="o">{</span>
 <span class="n">String</span> <span class="n">state</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>
 <span class="n">state</span> <span class="o">+=</span> <span class="n">heater</span> <span class="o">?</span> <span class="s">"H"</span> <span class="o">:</span> <span class="s">"h"</span><span class="o">;</span>
 <span class="n">state</span> <span class="o">+=</span> <span class="n">blower</span> <span class="o">?</span> <span class="s">"B"</span> <span class="o">:</span> <span class="s">"b"</span><span class="o">;</span>
 <span class="n">state</span> <span class="o">+=</span> <span class="n">cooler</span> <span class="o">?</span> <span class="s">"C"</span> <span class="o">:</span> <span class="s">"c"</span><span class="o">;</span>
 <span class="n">state</span> <span class="o">+=</span> <span class="n">hiTempAlarm</span> <span class="o">?</span> <span class="s">"H"</span> <span class="o">:</span> <span class="s">"h"</span><span class="o">;</span>
 <span class="n">state</span> <span class="o">+=</span> <span class="n">loTempAlarm</span> <span class="o">?</span> <span class="s">"L"</span> <span class="o">:</span> <span class="s">"l"</span><span class="o">;</span>
 <span class="k">return</span> <span class="n">state</span><span class="o">;</span>
 <span class="o">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">StringBuffers</span></code> would have been more efficient. However, the test environment, is not likely to be
constrained.</p>
</div>
<div class="section" id="verdict">
<h5>Verdict:<a class="headerlink" href="#verdict" title="Permalink to this headline">Â¶</a></h5>
<p>There are things that you might never do in a production environment that are perfectly fine in a test environment. Usually they involve
issues of memory or CPU efficiency. But they never involve issues of <strong>cleanliness</strong>.</p>
</div>
</div>
</div>
<div class="section" id="one-assert-per-test-soft-requirement">
<h3>One Assert per Test (soft requirement)<a class="headerlink" href="#one-assert-per-test-soft-requirement" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// relatively bad</span>

<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetPageHieratchyAsXml</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
 <span class="n">makePages</span><span class="o">(</span><span class="s">"PageOne"</span><span class="o">,</span> <span class="s">"PageOne.ChildOne"</span><span class="o">,</span> <span class="s">"PageTwo"</span><span class="o">);</span>
 
 <span class="n">submitRequest</span><span class="o">(</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"type:pages"</span><span class="o">);</span>
 
 <span class="n">assertResponseIsXML</span><span class="o">();</span>
 
 <span class="n">assertResponseContains</span><span class="o">(</span>
 <span class="s">"&lt;name&gt;PageOne&lt;/name&gt;"</span><span class="o">,</span> <span class="s">"&lt;name&gt;PageTwo&lt;/name&gt;"</span><span class="o">,</span> <span class="s">"&lt;name&gt;ChildOne&lt;/name&gt;"</span>
 <span class="o">);</span>
 <span class="o">}</span>
</pre></div>
</div>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="c1">// relatively good</span>

<span class="c1">// first assert</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetPageHierarchyAsXml</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

<span class="n">givenPages</span><span class="o">(</span><span class="s">"PageOne"</span><span class="o">,</span> <span class="s">"PageOne.ChildOne"</span><span class="o">,</span> <span class="s">"PageTwo"</span><span class="o">);</span>

<span class="n">whenRequestIsIssued</span><span class="o">(</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"type:pages"</span><span class="o">);</span>

<span class="n">thenResponseShouldBeXML</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">// second assert</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">testGetPageHierarchyHasRightTags</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

<span class="n">givenPages</span><span class="o">(</span><span class="s">"PageOne"</span><span class="o">,</span> <span class="s">"PageOne.ChildOne"</span><span class="o">,</span> <span class="s">"PageTwo"</span><span class="o">);</span>

<span class="n">whenRequestIsIssued</span><span class="o">(</span><span class="s">"root"</span><span class="o">,</span> <span class="s">"type:pages"</span><span class="o">);</span>

<span class="n">thenResponseShouldContain</span><span class="o">(</span>
<span class="s">"&lt;name&gt;PageOne&lt;/name&gt;"</span><span class="o">,</span> <span class="s">"&lt;name&gt;PageTwo&lt;/name&gt;"</span><span class="o">,</span> <span class="s">"&lt;name&gt;ChildOne&lt;/name&gt;"</span>
<span class="o">);</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Notice the <code class="docutils literal notranslate"><span class="pre">given-when-then</span></code> naming pattern.</p>
<p>Drawback: duplicate code</p>
<div class="section" id="possible-solutions">
<h4>Possible solutions<a class="headerlink" href="#possible-solutions" title="Permalink to this headline">Â¶</a></h4>
<p>1- Use the TEMPLATE METHOD pattern and put the <strong>given</strong>/<strong>when</strong> parts in the base class, and the <strong>then</strong> parts in different derivatives<br/>
2- Create a completely separate test class and put the <strong>given</strong>/<strong>when</strong> parts in the @Before function, and the <strong>then</strong> parts in each @Test function.</p>
<p>Here, this seems like too much mechanism for such a minor issue, and you could stick to multiple <code class="docutils literal notranslate"><span class="pre">asserts</span></code>.</p>
<p><strong>Verdict</strong>: the best thing we can say is that the number of asserts in a test ought to be minimized.</p>
</div>
</div>
<div class="section" id="single-concept-per-test">
<h3>Single Concept per Test<a class="headerlink" href="#single-concept-per-test" title="Permalink to this headline">Â¶</a></h3>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * Miscellaneous tests for the addMonths() method.</span>
<span class="cm"> */</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testAddMonths</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">SerialDate</span> <span class="n">d1</span> <span class="o">=</span> <span class="n">SerialDate</span><span class="o">.</span><span class="na">createInstance</span><span class="o">(</span><span class="mi">31</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">2004</span><span class="o">);</span>
     
     <span class="n">SerialDate</span> <span class="n">d2</span> <span class="o">=</span> <span class="n">SerialDate</span><span class="o">.</span><span class="na">addMonths</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">d1</span><span class="o">);</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="n">d2</span><span class="o">.</span><span class="na">getDayOfMonth</span><span class="o">());</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="n">d2</span><span class="o">.</span><span class="na">getMonth</span><span class="o">());</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2004</span><span class="o">,</span> <span class="n">d2</span><span class="o">.</span><span class="na">getYYYY</span><span class="o">());</span>
     
     <span class="n">SerialDate</span> <span class="n">d3</span> <span class="o">=</span> <span class="n">SerialDate</span><span class="o">.</span><span class="na">addMonths</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="n">d1</span><span class="o">);</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">31</span><span class="o">,</span> <span class="n">d3</span><span class="o">.</span><span class="na">getDayOfMonth</span><span class="o">());</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="n">d3</span><span class="o">.</span><span class="na">getMonth</span><span class="o">());</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2004</span><span class="o">,</span> <span class="n">d3</span><span class="o">.</span><span class="na">getYYYY</span><span class="o">());</span>
     
     <span class="n">SerialDate</span> <span class="n">d4</span> <span class="o">=</span> <span class="n">SerialDate</span><span class="o">.</span><span class="na">addMonths</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">SerialDate</span><span class="o">.</span><span class="na">addMonths</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">d1</span><span class="o">));</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="n">d4</span><span class="o">.</span><span class="na">getDayOfMonth</span><span class="o">());</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span> <span class="n">d4</span><span class="o">.</span><span class="na">getMonth</span><span class="o">());</span>
     <span class="n">assertEquals</span><span class="o">(</span><span class="mi">2004</span><span class="o">,</span> <span class="n">d4</span><span class="o">.</span><span class="na">getYYYY</span><span class="o">());</span>
 <span class="o">}</span>
</pre></div>
</div>
<p><strong>Concepts:</strong></p>
<p>â€¢ Given the last day of a month with 31 days (like May):</p>
<ol class="simple">
<li><p>When you add one month, such that the last day of that month is the 30th
(like June), then the date should be the 30th of that month, not the 31st.</p></li>
<li><p>When you add two months to that date, such that the final month has 31 days,
then the date should be the 31st.</p></li>
</ol>
<p>â€¢ Given the last day of a month with 30 days in it (like June):</p>
<ol class="simple">
<li><p>When you add one month such that the last day of that month has 31 days, then the
date should be the 30th, not the 31st.</p></li>
</ol>
<p><strong>Proposed change:</strong>
You should test just <strong>one concept per test</strong> function.</p>
</div>
<div class="section" id="f-i-r-s-t">
<h3>F.I.R.S.T.<a class="headerlink" href="#f-i-r-s-t" title="Permalink to this headline">Â¶</a></h3>
<p>The other five rules for clean tests:</p>
<ul class="simple">
<li><p><strong>Fast:</strong></p>
<ul>
<li><p>They should run quickly.</p></li>
<li><p>When tests run slow, you wonâ€™t want to run them frequently.</p></li>
<li><p>If you donâ€™t run them frequently, you wonâ€™t find problems early
enough to fix them easily.</p></li>
<li><p>You wonâ€™t feel as free to clean up the code.</p></li>
<li><p>Eventually the code will begin to rot.</p></li>
</ul>
</li>
<li><p><strong>Independent:</strong></p>
<ul>
<li><p>One test should not set up the conditions for the next test.</p></li>
<li><p>You should be able to run each test independently and run the tests in
any order you like.</p></li>
<li><p>When tests depend on each other, then the first one to fail causes a cascade of downstream failures, making diagnosis difficult and hiding downstream defects.</p></li>
</ul>
</li>
<li><p><strong>Repeatable:</strong></p>
<ul>
<li><p>Tests should be repeatable in any environment.</p></li>
<li><p>You should be able to run the
tests in the production environment, in the QA environment, and on your laptop while
riding home on the train without a network.</p></li>
<li><p>If your tests arenâ€™t repeatable in any environment, then youâ€™ll always have an excuse for why they fail.</p></li>
<li><p>Youâ€™ll also find yourself unable to run the tests when the environment isnâ€™t available.</p></li>
</ul>
</li>
<li><p><strong>Self-Validating:</strong></p>
<ul>
<li><p>The tests should have a boolean output.</p></li>
<li><p>Either they pass or fail.</p></li>
<li><p>You should not have to read through a log file to tell whether the tests pass.</p></li>
<li><p>You should not have
to manually compare two different text files to see whether the tests pass.</p></li>
<li><p>If the tests arenâ€™t self-validating, then failure can become subjective and running the tests can require a long
manual evaluation.</p></li>
</ul>
</li>
<li><p><strong>Timely:</strong></p>
<ul>
<li><p>The tests need to be written in a timely fashion.</p></li>
<li><p>Unit tests should be written just before the production code that makes them pass.</p></li>
<li><p>If you write tests after the production code, then you may find the production code to be hard to test.</p></li>
<li><p>You may decide that some production code is too hard to test.</p></li>
<li><p>You may not design the production code to be testable.</p></li>
</ul>
</li>
</ul>
</div>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../setting_up_project.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Setting up and organizing a project</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="programming_intro.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Getting started with programming</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, SfB_UiO
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/computational/clean_code.md.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Clean code</a><ul>
<li><a class="reference internal" href="#chapter-1-meaningful-names">Chapter 1: Meaningful names</a><ul>
<li><a class="reference internal" href="#use-intention-revealing-names">Use intention-revealing names</a></li>
<li><a class="reference internal" href="#avoid-disinformation">Avoid disinformation</a></li>
<li><a class="reference internal" href="#make-meaningful-distinctions">Make meaningful distinctions</a></li>
<li><a class="reference internal" href="#use-pronounceable-names">Use pronounceable names</a></li>
<li><a class="reference internal" href="#use-searchable-names">Use searchable names</a></li>
<li><a class="reference internal" href="#avoid-mental-mapping">Avoid mental mapping</a></li>
<li><a class="reference internal" href="#classes-and-objects-should-have-noun-names">Classes and objects should have noun names</a></li>
<li><a class="reference internal" href="#methods-should-have-verb-or-verb-phrases-as-names">Methods should have verb or verb phrases as names</a></li>
<li><a class="reference internal" href="#don-t-be-cute">Donâ€™t be cute</a></li>
<li><a class="reference internal" href="#pick-one-word-per-concept">Pick one word per concept</a></li>
<li><a class="reference internal" href="#other-rules">Other rules:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chapter-3-functions">Chapter 3: Functions</a><ul>
<li><a class="reference internal" href="#make-functions-small">Make functions small</a></li>
<li><a class="reference internal" href="#keep-indentation-level-at-maximum-1-or-2">Keep indentation level at maximum 1 or 2</a></li>
<li><a class="reference internal" href="#functions-should-do-one-thing">Functions should do one thing</a></li>
<li><a class="reference internal" href="#the-stepdown-rule">The stepdown-rule</a></li>
<li><a class="reference internal" href="#give-your-functions-few-arguments">Give your functions few arguments</a></li>
<li><a class="reference internal" href="#flag-arguments-are-ugly">Flag arguments are ugly</a></li>
<li><a class="reference internal" href="#functions-should-not-have-side-effects">Functions should not have side effects</a></li>
<li><a class="reference internal" href="#functions-should-either-do-something-or-answer-something-not-both">Functions should either do something or answer something (not both)</a></li>
<li><a class="reference internal" href="#prefer-exceptions-to-returning-error-codes">Prefer exceptions to returning error codes</a></li>
<li><a class="reference internal" href="#extract-try-catch-blocks">Extract try/catch blocks</a></li>
<li><a class="reference internal" href="#don-t-repeat-yourself">Donâ€™t repeat yourself</a></li>
<li><a class="reference internal" href="#optional-all-functions-should-have-one-entry-and-one-exit">(Optional) All functions should have one entry and one exit</a></li>
<li><a class="reference internal" href="#refine-long-functions-into-multiple-shorter">Refine long functions into multiple shorter</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chapter-4-comments">Chapter 4: Comments</a><ul>
<li><a class="reference internal" href="#comments-do-not-make-up-for-bade-code">Comments do not make up for bade code</a></li>
<li><a class="reference internal" href="#explain-your-self-in-code">Explain your self in code</a></li>
<li><a class="reference internal" href="#don-t-use-comments-when-you-can-use-a-function-or-variable">Donâ€™t use comments when you can use a function or variable</a></li>
<li><a class="reference internal" href="#avoid-noise">Avoid noise</a></li>
<li><a class="reference internal" href="#avoid-todo-comments">Avoid todo comments</a></li>
<li><a class="reference internal" href="#informative-comments">Informative comments</a></li>
<li><a class="reference internal" href="#don-t-comment-out-code">Donâ€™t comment out code</a></li>
</ul>
</li>
<li><a class="reference internal" href="#chapter-5-formatting">Chapter 5: Formatting</a><ul>
<li><a class="reference internal" href="#vertical-formatting">Vertical formatting</a><ul>
<li><a class="reference internal" href="#the-newspaper-metaphor-structure">The Newspaper Metaphor (structure)</a></li>
<li><a class="reference internal" href="#the-newspaper-metaphor-length-of-files">The Newspaper Metaphor (length of files)</a></li>
<li><a class="reference internal" href="#vertical-openness-between-concepts">Vertical Openness Between Concepts</a></li>
<li><a class="reference internal" href="#vertical-density">Vertical Density</a></li>
<li><a class="reference internal" href="#vertical-distance">Vertical Distance</a><ul>
<li><a class="reference internal" href="#variable-declarations">Variable Declarations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vertical-ordering-language-dependent">Vertical ordering (language dependent)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#horizontal-formatting">Horizontal Formatting</a><ul>
<li><a class="reference internal" href="#horizontal-openness-and-density">Horizontal Openness and Density</a></li>
<li><a class="reference internal" href="#horizontal-alignment">Horizontal Alignment</a></li>
<li><a class="reference internal" href="#indentation">Indentation</a><ul>
<li><a class="reference internal" href="#breaking-indentation">Breaking Indentation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#chapter-9-unit-tests">Chapter 9: Unit Tests</a><ul>
<li><a class="reference internal" href="#the-three-laws-of-tdd-test-driven-development">The Three Laws of TDD (Test Driven Development)</a></li>
<li><a class="reference internal" href="#keeping-tests-clean-no-quick-and-dirty-tests">Keeping Tests Clean: No quick and dirty tests</a></li>
<li><a class="reference internal" href="#clean-tests">Clean Tests</a><ul>
<li><a class="reference internal" href="#build-operate-check-pattern">BUILD-OPERATE-CHECK pattern</a></li>
<li><a class="reference internal" href="#a-dual-standard">A Dual Standard</a><ul>
<li><a class="reference internal" href="#readability">Readability</a></li>
<li><a class="reference internal" href="#efficiency">Efficiency</a></li>
<li><a class="reference internal" href="#verdict">Verdict:</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#one-assert-per-test-soft-requirement">One Assert per Test (soft requirement)</a><ul>
<li><a class="reference internal" href="#possible-solutions">Possible solutions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#single-concept-per-test">Single Concept per Test</a></li>
<li><a class="reference internal" href="#f-i-r-s-t">F.I.R.S.T.</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>